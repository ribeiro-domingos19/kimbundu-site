<% layout = "layout" %>
<div class="container">
  <h2>Quiz da Aula <%= lessonId %></h2>

  <form method="POST" action="/lessons/<%= lessonId %>/submit">
    <% // Itera sobre as chaves (qKey, ex: 'q1') do objeto quiz.questions %>
    <% Object.keys(quiz.questions).forEach(function(qKey, index) { 
         const q = quiz.questions[qKey]; %>
      <div style="margin-bottom:20px;">
        <% // qKey é usado como o 'name' do input, o que o servidor espera. %>
        <p><b><%= index + 1 %>. <%= q.text %></b></p>
        <% q.options.forEach(function(opt, idx) { %>
          <label>
            <% // O 'value' é o índice (idx) da resposta. %>
            <input type="radio" name="<%= qKey %>" value="<%= idx %>" required>
            <%= opt %>
          </label><br>
        <% }); %>
      </div>
    <% }); %>
    <button type="submit">Enviar Respostas</button>
  </form>
</div>

